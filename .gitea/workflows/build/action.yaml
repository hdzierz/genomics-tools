name: 'build-genomic-tools'
description: Build Genomic Tools

inputs:
  stage:
    description: 'Whether to build, test or deploy'
  tools-dir:
    description: 'The  name of the directory that contains tools.'
    required: true
    default: 'tools'
  tools-modified:
    description: 'The tools that have been modified'
    required: false
  build-version:
    description: 'The build version of the docker image'
    required: true
  docker-user:
    description: 'The build version of the docker image'
    required: false
  docker-passwd:
    description: 'The build version of the docker image'
    required: false
  registry:
    description: 'registry'
    required: false

runs:
  using: composite
  steps:
    - name: Checkout
      uses: actions/checkout@v4
    - name: build
      run: bash -x pipeline/pipeline-entry.sh
      shell: bash -x
      env:
        STAGE: ${{ inputs.stage }}
        REF: ${{ gitea.ref_name }}
        BUILD_VERSION: ${{ inputs.build-version }}
        GITEA_ACTION_PATH: ${{ gitea.action_path }}
        DOCKER_IO_USER: ${{ inputs.docker-user }}
        DOCKER_IO_PASSWORD: ${{ inputs.docker-passwd }}
        EXTERNAL_REGISTRY: ${{ inputs.registry }}
